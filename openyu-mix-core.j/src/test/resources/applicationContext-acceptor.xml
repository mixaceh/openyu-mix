<?xml version="1.0" encoding="UTF-8"?>

<beans
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
             http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
             http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
             ">
	<bean
		id="messageService"
		class="org.openyu.socklet.message.service.impl.MessageServiceImpl"
		parent="baseServiceSupporter" />

	<bean
		id="protocolService"
		class="org.openyu.socklet.message.service.impl.ProtocolServiceFactoryBean"
		parent="baseServiceFactorySupporter"
		p:configLocation="file:src/test/config/etc/ProtocolService.properties" />

	<!-- acceptor -->
	<bean
		id="acceptorThreadService"
		class="org.openyu.commons.thread.impl.ThreadServiceFactoryBean"
		parent="threadService"
		p:configLocation="file:src/test/config/etc/AcceptorThreadService.properties" />

	<bean
		id="acceptorServiceSupporter"
		class="org.openyu.socklet.acceptor.service.impl.AcceptorServiceImpl"
		parent="baseServiceSupporter"
		abstract="true"
		p:threadService-ref="acceptorThreadService" />

	<bean
		id="acceptorSupporter"
		parent="acceptorServiceSupporter"
		abstract="true"
		p:moduleTypeName="org.openyu.socklet.core.net.socklet.CoreModuleType"
		p:messageTypeName="org.openyu.socklet.core.net.socklet.CoreMessageType" />
			
	<!-- socklet -->
	<bean
		id="sockletThreadService"
		class="org.openyu.commons.thread.impl.ThreadServiceFactoryBean"
		parent="threadService"
		p:configLocation="file:src/test/config/etc/SockletThreadService.properties" />

	<bean
		id="sockletServiceSupporter"
		class="org.openyu.socklet.socklet.service.supporter.SockletServiceSupporter"
		parent="baseServiceSupporter"
		abstract="true"
		p:threadService-ref="sockletThreadService" />
		
	<!--listener -->
	<bean
		id="contextListenerSupporter"
		class="org.openyu.socklet.context.service.event.supporter.ContextListenerSupporter"
		parent="baseListenerSupporter"
		abstract="true" />

	<bean
		id="relationListenerSupporter"
		class="org.openyu.socklet.acceptor.service.event.supporter.RelationListenerSupporter"
		parent="baseListenerSupporter"
		abstract="true" />

	<bean
		id="sessionListenerSupporter"
		class="org.openyu.socklet.session.service.event.supporter.SessionListenerSupporter"
		parent="baseListenerSupporter"
		abstract="true" />	
		
	<!-- system -->
	<bean
		id="systemContextAdapter"
		class="org.openyu.socklet.context.service.event.adapter.ContextAdapter"
		parent="contextListenerSupporter"
		abstract="true"
		p:acceptors-ref="systemContextAdapterAcceptors" />

	<util:set
		id="systemContextAdapterAcceptors"
		set-class="java.util.LinkedHashSet">
		<value>system</value>
	</util:set>

	<bean
		id="systemRelationAdapter"
		class="org.openyu.socklet.acceptor.service.event.adapter.RelationAdapter"
		parent="relationListenerSupporter"
		abstract="true"
		p:acceptors-ref="systemRelationAdapterAcceptors" />

	<util:set
		id="systemRelationAdapterAcceptors"
		set-class="java.util.LinkedHashSet">
		<value>system</value>
	</util:set>

	<!-- slave -->
	<bean
		id="slaveSessionAdapter"
		class="org.openyu.socklet.session.service.event.adapter.SessionAdapter"
		parent="sessionListenerSupporter"
		abstract="true"
		p:acceptors-ref="slaveSessionAdapterAcceptors" />

	<util:set
		id="slaveSessionAdapterAcceptors"
		set-class="java.util.LinkedHashSet">
		<value>SLAVE1</value>
		<value>SLAVE2</value>
		<value>SLAVE3</value>
		<value>SLAVE4</value>
		<value>SLAVE5</value>
		<value>SLAVE6</value>
		<value>SLAVE7</value>
		<value>SLAVE8</value>
		<value>SLAVE9</value>
		<value>SLAVE10</value>
	</util:set>	

	<!-- system, slave -->
	<bean
		id="systemSlaveSessionAdapter"
		class="org.openyu.socklet.session.service.event.adapter.SessionAdapter"
		parent="sessionListenerSupporter"
		abstract="true"
		p:acceptors-ref="systemSlaveSessionAdapterAcceptors" />

	<util:set
		id="systemSlaveSessionAdapterAcceptors"
		set-class="java.util.LinkedHashSet">
		<value>SYSTEM</value>
		<value>SLAVE1</value>
		<value>SLAVE2</value>
		<value>SLAVE3</value>
		<value>SLAVE4</value>
		<value>SLAVE5</value>
		<value>SLAVE6</value>
		<value>SLAVE7</value>
		<value>SLAVE8</value>
		<value>SLAVE9</value>
		<value>SLAVE10</value>
	</util:set>

</beans>